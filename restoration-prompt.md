# Restoration Prompt

This prompt removes all artifacts generated by the implementation prompt and restores the package to its pre-implementation state.

**Warning**: This operation deletes source code, tests, and generated configuration. However, all these files can be recreated by running the IMPLEMENTATION-PROMPT.md again. The specification files are preserved.

---

## Part 1: Verify Package State

Before proceeding with restoration, verify that the package is in a valid state:

1. **Verify specification files exist**:
   - [ ] `/docs/specs/hello-endpoint.md` exists
   - [ ] `/docs/specs/api-design.md` exists
   - [ ] `/docs/specs/error-handling.md` exists
   - [ ] `/docs/specs/technology-choices.md` exists
   - [ ] `/docs/specs/getting-started-design.md` exists

2. **Verify core guidance files exist**:
   - [ ] `CLAUDE.md` exists
   - [ ] `README.md` exists
   - [ ] `IMPLEMENTATION-PROMPT.md` exists

If any specification or core file is missing, **STOP** and verify the package integrity before proceeding.

---

## Part 2: Dry Run (Optional)

To see what would be deleted without actually deleting:

```bash
echo "=== Files/Directories that would be DELETED ==="
echo "Generated source code:"
[ -d src ] && echo "  - src/" || echo "  - src/ (not found, OK)"
[ -d tests ] && echo "  - tests/" || echo "  - tests/ (not found, OK)"

echo "Generated configuration:"
[ -f global.json ] && echo "  - global.json" || echo "  - global.json (not found, OK)"
[ -f hello-world-api.sln ] && echo "  - hello-world-api.sln" || echo "  - hello-world-api.sln (not found, OK)"
[ -f .gitignore ] && echo "  - .gitignore" || echo "  - .gitignore (not found, OK)"

echo "Generated documentation:"
[ -f docs/guides/getting-started.md ] && echo "  - docs/guides/getting-started.md" || echo "  - docs/guides/getting-started.md (not found, OK)"

echo ""
echo "=== Specifications and core files that will be PRESERVED ==="
[ -f CLAUDE.md ] && echo "  ✓ CLAUDE.md" || echo "  ✗ CLAUDE.md (WARNING: Missing!)"
[ -f README.md ] && echo "  ✓ README.md" || echo "  ✗ README.md (WARNING: Missing!)"
[ -d docs/specs ] && echo "  ✓ docs/specs/" || echo "  ✗ docs/specs/ (WARNING: Missing!)"
[ -f docs/guides/adding-endpoints.md ] && echo "  ✓ docs/guides/adding-endpoints.md" || echo "  ✗ docs/guides/adding-endpoints.md (WARNING: Missing!)"
```

---

## Part 3: Delete Generated Artifacts

### Step 1: Remove Source and Test Code

```bash
# Remove source code directory
rm -rf src/

# Remove tests directory
rm -rf tests/

# Verify deletion
echo "Verifying deletion of source code..."
[ ! -d src ] && echo "✓ src/ removed" || echo "✗ src/ still exists"
[ ! -d tests ] && echo "✓ tests/ removed" || echo "✗ tests/ still exists"
```

### Step 2: Remove Configuration Files

```bash
# Remove SDK version lock
rm -f global.json

# Remove solution file
rm -f hello-world-api.sln

# Remove .gitignore
rm -f .gitignore

# Verify deletion
echo "Verifying deletion of configuration files..."
[ ! -f global.json ] && echo "✓ global.json removed" || echo "✗ global.json still exists"
[ ! -f hello-world-api.sln ] && echo "✓ hello-world-api.sln removed" || echo "✗ hello-world-api.sln still exists"
[ ! -f .gitignore ] && echo "✓ .gitignore removed" || echo "✗ .gitignore still exists"
```

### Step 3: Remove Generated Documentation

```bash
# Remove generated getting-started guide
rm -f docs/guides/getting-started.md

# Verify deletion
echo "Verifying deletion of generated documentation..."
[ ! -f docs/guides/getting-started.md ] && echo "✓ docs/guides/getting-started.md removed" || echo "✗ docs/guides/getting-started.md still exists"
```

### Step 4: Clean Build Artifacts (Optional)

These are safe to delete as they're automatically generated by `dotnet build`:

```bash
# Remove build output directories
rm -rf src/bin/ src/obj/
rm -rf tests/bin/ tests/obj/

echo "Verifying deletion of build artifacts..."
[ ! -d src/bin ] && echo "✓ src/bin/ removed" || echo "✗ src/bin/ still exists"
[ ! -d src/obj ] && echo "✓ src/obj/ removed" || echo "✗ src/obj/ still exists"
[ ! -d tests/bin ] && echo "✓ tests/bin/ removed" || echo "✗ tests/bin/ still exists"
[ ! -d tests/obj ] && echo "✓ tests/obj/ removed" || echo "✗ tests/obj/ still exists"
```

---

## Part 4: Verify Restoration

### Verify Specifications Remain

```bash
echo "=== Verifying specification files remain intact ==="

check_file() {
  if [ -f "$1" ]; then
    echo "✓ $1"
    return 0
  else
    echo "✗ $1 (MISSING - RESTORATION INCOMPLETE)"
    return 1
  fi
}

all_ok=true

check_file "CLAUDE.md" || all_ok=false
check_file "README.md" || all_ok=false
check_file "IMPLEMENTATION-PROMPT.md" || all_ok=false
check_file "docs/specs/hello-endpoint.md" || all_ok=false
check_file "docs/specs/api-design.md" || all_ok=false
check_file "docs/specs/error-handling.md" || all_ok=false
check_file "docs/specs/technology-choices.md" || all_ok=false
check_file "docs/specs/getting-started-design.md" || all_ok=false
check_file "docs/specs/restore-prompt-design.md" || all_ok=false
check_file "docs/guides/adding-endpoints.md" || all_ok=false
check_file "docs/adr/adr-001-minimal-apis.md" || all_ok=false

if [ "$all_ok" = true ]; then
  echo ""
  echo "✓ All specification files present"
else
  echo ""
  echo "✗ Some specification files are missing - restoration may be incomplete"
fi
```

### Verify Generated Files Are Gone

```bash
echo "=== Verifying generated files have been removed ==="

check_removed() {
  if [ ! -e "$1" ]; then
    echo "✓ $1 removed"
    return 0
  else
    echo "✗ $1 still exists"
    return 1
  fi
}

all_removed=true

check_removed "src" || all_removed=false
check_removed "tests" || all_removed=false
check_removed "global.json" || all_removed=false
check_removed "hello-world-api.sln" || all_removed=false
check_removed ".gitignore" || all_removed=false
check_removed "docs/guides/getting-started.md" || all_removed=false

if [ "$all_removed" = true ]; then
  echo ""
  echo "✓ All generated files removed"
else
  echo ""
  echo "✗ Some generated files remain"
fi
```

---

## Part 5: Delete This Restoration Prompt

**Final Step**: Remove the restoration prompt itself to complete the restoration to pre-implementation state:

```bash
# Remove this restoration prompt
rm -f restoration-prompt.md

# Verify deletion
echo "Verifying removal of restoration prompt..."
[ ! -f restoration-prompt.md ] && echo "✓ restoration-prompt.md removed" || echo "✗ restoration-prompt.md still exists"

echo ""
echo "╔════════════════════════════════════════════════════════════════╗"
echo "║              RESTORATION COMPLETE ✓                            ║"
echo "║                                                                ║"
echo "║  Package restored to pre-implementation state.                ║"
echo "║  All specifications remain intact and ready for the next      ║"
echo "║  implementation run using IMPLEMENTATION-PROMPT.md            ║"
echo "╚════════════════════════════════════════════════════════════════╝"
```

---

## Next Steps

### To Re-Implement
If you want to regenerate the project:
```bash
# Use the implementation prompt to regenerate everything
# Read IMPLEMENTATION-PROMPT.md for instructions
```

### To Verify Package State
```bash
# List all remaining files to confirm restoration
find . -type f -name "*.md" | sort
```

### If Something Went Wrong
Check that all specification files listed in Part 4 still exist. If any are missing, restoration was incomplete. Restore from backup if available.

---

## Safety Notes

- ✓ **Safe**: All deleted files can be recreated by running IMPLEMENTATION-PROMPT.md
- ✓ **Safe**: Specifications are preserved and unchanged
- ✓ **Safe**: This script checks for file existence before deletion
- ✓ **Safe**: Build artifacts can be safely deleted (auto-regenerated)

---

**Package is now ready for a fresh implementation run.**
