# API Speculator: Generic API Specification Generator Prompt

## Overview

The **API Speculator** is a technology-specific specification generator (a Speculator) that generates a complete, specification-first documentation package for REST APIs, following the same industry-standard AGENTS.md/CLAUDE.md patterns as the Hello World API example.

**What you'll get**: A ready-to-implement specification package (markdown files only, no code) that you can then use with your project's implementation prompt (i.e., [API-IMPLEMENTATION-PROMPT.md](./API-IMPLEMENTATION-PROMPT.md)) to generate working code.

**The cycle**: Describe your API → Generate specifications → Implement with code → Restore to specification state (repeat as needed)

---

## Part 1: Understand the Methodology

### What Is Specification-First Development?

Rather than starting with code, you:
1. **Describe your project** in detail
2. **Generate specifications** as markdown files (CLAUDE.md, API specs, guides, architecture decisions)
3. **Run an implementation prompt** that generates all your project code based on those specifications
4. **Restore to specifications** by running a restoration prompt that removes all generated code, leaving only the specs

**Example**: The Hello World API project demonstrates this end-to-end:
- Specifications: 11 markdown files describing a simple REST API (generated by API Speculator)
- Implementation: API-SPECULATOR.md generated complete working code (src/, tests/, config)
- Verification: All tests passed (13/13)
- Restoration: API-RESTORATION-PROMPT.md cleaned all generated artifacts, returned to specification-only state

**Why this approach?**
- Specifications are stable and reusable
- Same specifications can generate code, documentation, architecture decisions
- Code can be regenerated infinitely from specs
- Perfect for demonstration, evolution, and team alignment

---

## Part 2: About the Package You'll Generate

The output will include:

### Root-Level Files
- **CLAUDE.md** (~300-400 lines): Agent guidance with project-specific coding standards, workflow, and gotchas
- **README.md**: Human-friendly quick start guide (project-specific)
- **API-IMPLEMENTATION-PROMPT.md**: 4-part code generation system (adapted to your project)

### Documentation Directory (/docs/)
- **/docs/api/specs/**: Project specifications (API design, error handling, technology choices, first features)
- **/docs/api/guides/**: Procedural guides (getting-started design, adding-features workflow)
- **/docs/api/adr/**: Architecture decision records (your project's first decision)

### Total Package
- 11+ markdown specification files
- All cross-referenced and ready for implementation
- Follows industry-standard AGENTS.md/CLAUDE.md patterns (60,000+ projects)
- Portable, self-contained, ready to move between projects

---

## Part 3: Answer the Questionnaire

Answer these questions to help generate your project-specific specifications:

### Section A: Project Basics

1. **Project Name**
   - What is the name of your project?

2. **Project Description**
   - What does your project do in 1-2 sentences?
   - Example: "A REST API for managing user tasks with real-time synchronisation"

3. **Primary Purpose**
   - Is this a REST API, library, service, microservice, CLI tool, etc.?

4. **Team Context**
   - Solo project or team project?
   - If team, roughly how many developers?

### Section B: Technology Decisions

*Reference*: Technology Choices specification defines framework/runtime/testing trade-offs

5. **Primary Language/Runtime**
   - What language/runtime? (e.g., Python, Node.js, Java, Go, .NET, Rust, etc.)
   - Version/LTS channel?

6. **Framework Choice**
   - What framework? (e.g., FastAPI, Express, Spring Boot, Django, ASP.NET Core, etc.)
   - Why this framework? (lightweight, full-featured, cloud-native, etc.)

7. **Testing Framework**
   - What testing framework? (e.g., pytest, Jest, JUnit, xUnit, Mocha, etc.)
   - Why this choice?

8. **Platform/Deployment**
   - Where will this run? (local machine, cloud, container, serverless, etc.)
   - Any platform-specific considerations? (e.g., ARM64 vs x64, macOS vs Linux vs Windows)

### Section C: Project Scope

9. **Phase 1 Scope**
   - What are the 1-3 main things your project manages or does?
   - Example: "User authentication, task creation, task listing"

10. **First Features/Endpoints** (if applicable)
    - Describe your first 1-3 features/endpoints for Phase 1
    - Example: "POST /users/login (authenticate user), GET /tasks (list user's tasks), POST /tasks (create new task)"

11. **Estimated Growth**
    - Roughly how many endpoints/features do you envision?
    - Phase 1: 1-3 (what we're specifying now)
    - Phase 2: ~5-10 (future growth)
    - Phase 3: ~10+ (full feature set)

### Section D: API/System Specifics (if applicable)

12. **Response Format**
    - JSON? XML? Protocol Buffers? Something else?
    - Default: JSON (industry standard)

13. **Authentication Strategy**
    - None (Phase 1), API keys, JWT tokens, OAuth, session-based?
    - If applicable, describe approach briefly

14. **Error Handling Approach**
    - Standard HTTP status codes + error envelope?
    - Specific error codes you want to track?

15. **Versioning Strategy**
    - API versioning needed? (URL path versioning, header versioning, no versioning)

### Section E: Special Requirements

16. **Any Other Considerations?**
    - Database requirements?
    - Real-time features?
    - Specific performance requirements?
    - Regulatory/compliance needs?
    - Anything else project-specific?

---

## Part 4: File Templates

Here's what each generated file should contain (for reference):

### Template: CLAUDE.md
```
# Claude Guidance: [Project Name]

## Project Overview
- What: [1-2 sentence description]
- Why: [purpose and use case]
- Tech Stack: [list choices from your questionnaire]
- Scope: Phase 1 implements [your phase 1 features]

## Getting Started for Claude
- Quick Context: [brief explanation of spec-first approach]
- Key Commands: [language/framework-specific build, run, test commands]
- Configuration: [project-specific files like global.json, etc.]
- Documentation Navigation: [links to specs, guides, decisions]

## Coding Standards
- [Language]-specific conventions
- Testing approach
- Error handling
- Any other standards

## Key Workflow: Adding New [Features/Endpoints]
- Step-by-step process adapted to your project

## Important Gotchas
- Platform-specific notes
- [Language/framework]-specific issues
- Team-specific constraints

## Links to Detailed Documentation
- See /docs/api/specs/ for...
- See /docs/api/guides/ for...
- See /docs/api/adr/ for...
```

### Template: README.md
```
# [Project Name]

[1-2 sentence description]

## Quick Start
[5 steps to get running]

## Prerequisites
[Software/setup requirements specific to your tech stack]

## Testing the [Feature]
[Example: curl/client to test first feature]

## Project Structure
[Brief overview linking to CLAUDE.md for details]

## Documentation
[Links to /docs/]

## [Contributing/Next Steps]
```

### Template: /docs/api/specs/api-design.md (for APIs)
```
# API Design Specification

## Design Principles
[Your principles: JSON-first, etc.]

## Endpoint Index
[Table of endpoints for Phase 1]

## Naming Conventions
[Your naming patterns]

## Response Format Standards
[Success/error response format]
```

### Template: /docs/api/specs/[first-feature].md
```
# [First Feature] Specification

## Endpoint
[METHOD /path]

## Purpose
[One-line description]

## Request Contract
[Method, URL, headers, body]

## Response Contract - Success
[200 response with JSON structure]

## Response Contract - Error
[Error responses with error codes]

## Examples
[Real curl/client examples]
```

### Template: /docs/api/specs/technology-choices.md
```
# Technology Choices Specification

## Framework: [Your Framework]
- Why: [rationale]
- Alternatives: [considered options and why rejected]

## Runtime: [Your Runtime]
- Why: [rationale]

## Testing: [Your Testing Framework]
- Why: [rationale]

## Platform: [Your Platform]
- Why: [rationale]

## Summary
[Table of choices and rationale]
```

### Template: /docs/api/specs/error-handling.md
```
# Error Handling Specification

## Error Response Envelope
[Your standard error format]

## HTTP Status Codes
[200, 400, 500, etc. usage]

## Error Codes Registry
[Your specific error codes]

## Implementation Guidelines
[How to implement errors in code]
```

### Template: /docs/api/guides/adding-features.md
```
# Adding [Features/Endpoints] Guide

## Process Overview
[Specification-first workflow adapted to your project]

## Step-by-Step Workflow
[1. Write spec, 2. Reference in docs, 3. Implement, 4. Write tests, etc.]

## File Naming Conventions
[Your conventions for spec files, code files, test files]

## Checklist
[Verification checklist for new features]
```

### Template: /docs/api/guides/getting-started-design.md
```
# Getting Started Guide Design Specification

## Required Sections
1. Prerequisites
2. Quick Start
3. Project Setup
4. Running the Application
5. Testing
6. Running Tests
7. Troubleshooting
8. Next Steps

## Structural Guidelines
[Guidelines for formatting, verification, linking to specs]

## Content Principles
[What to include, what not to include]
```

### Template: /docs/api/adr/adr-001-[decision].md
```
# ADR-001: [Technology/Architecture Decision]

## Status
Accepted

## Context
[Why this decision was needed]

## Decision
[What was decided]

## Consequences
[Pros and cons]

## Alternatives
[What was considered instead]
```

---

## Part 5: API Speculator Generation Instructions

When you have answers to the questionnaire, the API Speculator will:

1. **Extract Information**: Parse API name, tech stack, scope, endpoints
2. **Generate CLAUDE.md**: Customised for your API's language/framework
3. **Generate README.md**: Quick start adapted to your tech stack
4. **Generate /docs/api/specs/** files:
   - api-design.md (your design principles)
   - error-handling.md (your error strategy)
   - technology-choices.md (your framework decisions)
   - [first-endpoint].md (your first endpoint specification)
   - getting-started-design.md (template for generated guide)
   - restore-prompt-design.md (template for restoration)
5. **Generate /docs/api/guides/** files:
   - getting-started-design.md (structure template)
   - adding-features.md (your API's workflow)
6. **Generate /docs/api/adr/** files:
   - adr-001-[decision].md (your first architecture decision)
7. **Generate API-IMPLEMENTATION-PROMPT.md**: 4-part code generation system adapted to your API project
8. **Verify**: Check all files cross-reference correctly, naming conventions, abstraction level

**Note — API-CLAUDE.md**: `API-CLAUDE.md` is NOT generated during this specification phase. It is generated as the final output of `API-IMPLEMENTATION-PROMPT.md`, after all source code has been compiled and tested. It contains Claude Code agent guidance specific to the generated project (build commands, coding standards, endpoint workflows, gotchas, links to `/docs/`). Its content will mirror the CLAUDE.md template above, but populated with the actual project details.

---

## Part 6: Describe Your Project

**Now it's your turn**. Fill in the following sections with your project details:

---

# Your Project Specification

## Section A: Project Basics

**Project Name:**
[Enter project name]

**Project Description:**
[Enter 1-2 sentence description of what your project does]

**Primary Purpose:**
[REST API, library, service, CLI tool, etc.]

**Team Context:**
[Solo or team? If team, how many developers?]

---

## Section B: Technology Decisions

**Primary Language/Runtime:**
[e.g., Python 3.11, Node.js 20 LTS, Java 17, .NET 8, Go 1.21, etc.]

**Framework Choice:**
[e.g., FastAPI, Express, Spring Boot, Django, ASP.NET Core Minimal APIs, etc.]
[Why this framework?]

**Testing Framework:**
[e.g., pytest, Jest, JUnit, xUnit, Mocha, etc.]

**Platform/Deployment:**
[e.g., Docker, AWS Lambda, local machine, Kubernetes, etc.]
[Any platform-specific considerations?]

---

## Section C: Project Scope

**Phase 1 Scope (What are the main 1-3 things this project manages?):**
[e.g., User authentication, Task management, Data synchronisation, etc.]

**First Features/Endpoints (describe 1-3 features for Phase 1):**
[e.g., POST /users/register, POST /tasks/create, GET /tasks, etc.]

**Estimated Growth:**
- Phase 1: _____ features (what we're specifying now)
- Phase 2: _____ features (estimated future growth)
- Phase 3: _____ features (full feature set)

---

## Section D: API/System Specifics

**Response Format:**
[JSON / XML / other]

**Authentication Strategy:**
[None for Phase 1 / API keys / JWT / OAuth / Session-based / etc.]

**Error Handling Approach:**
[Standard HTTP codes + JSON envelope with error codes?]

**Versioning Strategy:**
[URL path versioning / Header versioning / No versioning]

---

## Section E: Special Requirements

**Any other project-specific considerations?**
[Database, real-time features, performance requirements, compliance needs, etc.]

---

## Final Check

Before submitting, verify:
- [ ] Project name is clear
- [ ] Primary purpose is clear
- [ ] Tech stack decisions are specific (versions, frameworks)
- [ ] Phase 1 scope is 1-3 features (not 10+)
- [ ] At least first feature is described in detail
- [ ] Any special requirements are noted

---

## What Happens Next

1. Submit your completed questionnaire to the API Speculator
2. The API Speculator will generate your complete specification package
3. You'll receive 11+ markdown specification files
4. You can review, refine, and ask questions about the specs
5. When ready, run [API-IMPLEMENTATION-PROMPT.md](./API-IMPLEMENTATION-PROMPT.md) to generate your working code and the `API-CLAUDE.md` agent guidance file
6. Run API-RESTORATION-PROMPT.md anytime to clean generated code and return to specs-only state

---

## Example: What You'll Get

After submission, you'll have a directory structure like:

```
your-project-name/
├── CLAUDE.md                           # Repository/methodology agent guidance
├── README.md                           # Human quick start
├── API-IMPLEMENTATION-PROMPT.md            # 4-part code generator (execute to generate code)
├── API-CLAUDE.md                       # Generated: project-specific agent guidance (created by API-IMPLEMENTATION-PROMPT.md)
└── docs/
    ├── specs/
    │   ├── [first-feature].md         # Your first feature spec
    │   ├── api-design.md              # Your design principles
    │   ├── error-handling.md          # Your error strategy
    │   ├── technology-choices.md      # Your tech decisions
    │   ├── getting-started-design.md  # Template for generated guide
    │   └── restore-prompt-design.md   # Template for restoration
    ├── guides/
    │   ├── getting-started-design.md
    │   └── adding-features.md
    └── adr/
        └── adr-001-[your-decision].md
```

All ready for API-IMPLEMENTATION-PROMPT.md to generate working code.

---

**Ready? Complete the questionnaire above and the API Speculator will generate your API specification package!**
